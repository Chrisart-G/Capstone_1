;/*FB_PKG_DELIM*/

__d("E2EEBackupSecretRegisterModule",["E2EEBackupCommon","QuickPerformanceLogger","VestaClient","VestaClientError","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("qpl")._(235865454,"167");function a(a,b,d){(h||(h=c("QuickPerformanceLogger"))).markerStart(i);h.markerAnnotate(i,{string:{product_use_case:b.productUseCase,registration_mode:"regular_mode"}});return j(a,b,!1,d)}function b(a,b,d){(h||(h=c("QuickPerformanceLogger"))).markerStart(i);h.markerAnnotate(i,{string:{product_use_case:b.productUseCase,registration_mode:"re-register_mode"}});return j(a,b,!0,d)}async function j(a,b,e,f){try{var g=await a.initRegister({clientId:b.clientId,productUseCase:b.productUseCase},f),j=g.isRegistered,k=g.islandEd25519Pub,l=g.islandEd25519PubSig,m=g.islandRsaPub;g=g.islandRsaPubSig;(h||(h=c("QuickPerformanceLogger"))).markerPoint(i,"init_register_network_call");if(j&&!e){(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(i,{string:{failure_reason:"ALREADY_REGISTERED"}});h.markerEnd(i,3376);throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.ALREADY_REGISTERED)}j=await Promise.all([d("VestaClient").validateHsmKey(m,g),d("VestaClient").validateHsmKey(k,l)]);e=j[0];g=j[1];if(!e){(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(i,{string:{failure_reason:"ISLAND_PUB_RSA_KEY_INVALID"}});h.markerEnd(i,3);throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.ISLAND_PUB_RSA_KEY_INVALID)}if(!g){(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(i,{string:{failure_reason:"ISLAND_PUB_ED25519_KEY_INVALID"}});h.markerEnd(i,3);throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.ISLAND_PUB_ED25519_KEY_INVALID)}h.markerPoint(i,"verify_island_rsa_key");h.markerPoint(i,"verify_island_ed25519_key");l=b.vestaAccountPin;if(l==null)throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.MISSING_PIN_INPUT);else{j=new TextEncoder();e=await d("VestaClient").beginRegister(j.encode(l));g=e.clientState;j=e.r1Message;(h||(h=c("QuickPerformanceLogger"))).markerPoint(i,"begin_register_vesta_client");l=await a.beginRegister({clientId:b.clientId,productUseCase:b.productUseCase,opaqueR1:j},f);e=l.opaqueChallenge;var n=l.opaqueR2;l=l.opaqueR2Sig;h.markerPoint(i,"begin_register_network_call");j=await d("VestaClient").finishRegister(j,n,l,k,g,b.secret,e,m);n=j.registerPayload;h.markerPoint(i,"finish_register_vesta_client");l=await a.finishRegister({clientId:b.clientId,productUseCase:b.productUseCase,encRegPayload:n},f);k=l.registerSuccess;h.markerPoint(i,"finish_register_network_call");if(!k){(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(i,{string:{failure_reason:"VESTA_SERVER_ERROR"}});h.markerEnd(i,3);throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.VESTA_SERVER_ERROR)}h.markerEnd(i,2)}}catch(a){if(a instanceof d("E2EEBackupCommon").BackupError)throw a;else if(a instanceof c("VestaClientError")){(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(i,{string:{failure_reason:"VestaClientException: "+a.name}});h.markerEnd(i,3);throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.VESTA_CLIENT_ERROR,a)}else{(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(i,{string:{failure_reason:a.message}});h.markerEnd(i,3);throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.NETWORK_PROVIDER_ERROR,a)}}}g.registerBackupSecret=a;g.reRegisterBackupSecret=b}),98);
__d("FBIconArrowsCircleFilled12.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsxs(d("XPlatReactSVG").G,{fillRule:"nonzero",children:[i.jsx(d("XPlatReactSVG").Path,{d:"M99.582 923.359a4.496 4.496 0 0 1-.082-.86 4.485 4.485 0 0 1 1.318-3.181A4.483 4.483 0 0 1 104 918a4.485 4.485 0 0 1 2.886 1.046.75.75 0 1 0 .96-1.151A5.986 5.986 0 0 0 104 916.5a5.983 5.983 0 0 0-4.242 1.757A5.985 5.985 0 0 0 98 922.5c0 .389.037.772.11 1.145a.75.75 0 0 0 1.472-.286zm8.836-1.718a4.485 4.485 0 0 1-1.236 4.041A4.483 4.483 0 0 1 104 927a4.485 4.485 0 0 1-2.884-1.046.75.75 0 1 0-.963 1.15A5.986 5.986 0 0 0 104 928.5a5.983 5.983 0 0 0 4.244-1.756A5.985 5.985 0 0 0 110 922.5c0-.389-.037-.772-.11-1.145a.75.75 0 0 0-1.472.286z",transform:"translate(352 157)"}),i.jsx(d("XPlatReactSVG").Path,{d:"M107 918.5h-1.25a.75.75 0 1 0 0 1.5h2a.75.75 0 0 0 .75-.75v-2a.75.75 0 1 0-1.5 0v1.25zm-6 8h1.25a.75.75 0 1 0 0-1.5h-2a.75.75 0 0 0-.75.75v2a.75.75 0 1 0 1.5 0v-1.25z",transform:"translate(352 157)"})]})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("LSCreateExtraVirtualDevice",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDebugToken.nop","LSCreateDerivedKeys.nop","LSCreateEncryptionKeyPair.nop","LSCreateSignatureKeyPair.nop","LSCreateSignatureWithArmadilloKey.nop","LSCreateSignature_v2.nop","LSGetArmadilloPublicKey.nop","LSGetBlobFromString.nop","LSGetOpenEpochKeys","LSGetViewerFBID","LSHandleCreateVirtualDeviceFailure","LSHmac_v2.nop","LSIsEncryptionVersionSecure","LSIsMobileClient","LSIssueNewEbTaskAndGetTaskIDV2","LSLogMebClientEvent.nop","LSOcmfClientEvolve_v2.nop","LSParseRecoveryCode_v2.nop","LSSymmetricEncryptionCreateEncryptedString.nop","justknobx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,d=a[a.length-1],e=[],f=[];return d.sequence([function(g){return d.sequence([function(c){return e[0]=d.i64.of_float(Date.now()),function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsCreateExtraVirtualDeviceStoredProcedure] Beginning execution."),d.i64.eq(a[0],d.i64.cast([0,1]))?d.sequence([function(a){return void 0!==void 0?d.storedProcedure(b("LSAppendDataTraceAddon"),void 0,d.i64.cast([0,1429]),d.i64.cast([0,2]),void 0,["50012"].join("")):d.resolve()},function(a){return d.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,e[27]=a[0],a})},function(a){return e[27]?e[28]=!0:e[28]=!1,e[28]&&!0?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[30]="LSDataTraceMciTraceLog native op not supported",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",e[30]].join("")),e[29]=d.createArray(),void 0!==void 0?e[31]=(e[29].push(void 0),e[29]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",e[30],e[29],d.i64.cast([0,3]))):d.resolve()}]):d.i64.eq(a[0],d.i64.cast([0,2]))?d.sequence([function(a){return void 0!==void 0?d.storedProcedure(b("LSAppendDataTraceAddon"),void 0,d.i64.cast([0,1429]),d.i64.cast([0,2]),void 0,["50013"].join("")):d.resolve()},function(a){return d.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,e[27]=a[0],a})},function(a){return e[27]?e[28]=!0:e[28]=!1,e[28]&&!0?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[30]="LSDataTraceMciTraceLog native op not supported",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",e[30]].join("")),e[29]=d.createArray(),void 0!==void 0?e[31]=(e[29].push(void 0),e[29]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",e[30],e[29],d.i64.cast([0,3]))):d.resolve()}]):d.sequence([function(a){return void 0!==void 0?d.storedProcedure(b("LSAppendDataTraceAddon"),void 0,d.i64.cast([0,1429]),d.i64.cast([0,2]),void 0,void 0):d.resolve()},function(a){return d.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,e[27]=a[0],a})},function(a){return e[27]?e[28]=!0:e[28]=!1,e[28]&&!0?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[30]="LSDataTraceMciTraceLog native op not supported",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",e[30]].join("")),e[29]=d.createArray(),void 0!==void 0?e[31]=(e[29].push(void 0),e[29]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",e[30],e[29],d.i64.cast([0,3]))):d.resolve()}])},function(a){return d.islc(d.filter(d.db.table(168).fetch(),function(a){return d.i64.eq(a.authorityLevel,d.i64.cast([0,80]))}),0,d.i64.to_float(d.i64.cast([0,1]))).next().then(function(a,c){var f=a.done;a=a.value;return f?(f=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,d.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,d.i64.cast([0,20]),void 0,void 0],e[1]=f[0],e[2]=f[1],e[3]=f[2],e[4]=f[3],e[5]=f[4],e[6]=f[5],e[7]=f[6],e[8]=f[7],e[9]=f[8],e[10]=f[9],e[11]=f[10],e[12]=f[11],e[13]=f[12],e[14]=f[13],e[15]=f[14],e[16]=f[15],e[17]=f[16],e[18]=f[17],f):(c=a.item,d.sequence([function(a){return e[32]=c.backupTenancy,e[31]=c.encryptionVersion,e[27]=void 0,d.i64.neq(e[27],void 0)?d.resolve(e[28]=e[27]):d.sequence([function(a){return e[33]=d.createArray(),d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,0])).then(function(a){return a=a,e[34]=a[0],a})},function(a){return e[34]?e[43]=(e[33].push(d.i64.cast([0,0])),e[33]):0,d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,2])).then(function(a){return a=a,e[35]=a[0],a})},function(a){return e[35]?e[43]=(e[33].push(d.i64.cast([0,2])),e[33]):0,d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,3])).then(function(a){return a=a,e[36]=a[0],a})},function(a){return e[36]?e[43]=(e[33].push(d.i64.cast([0,3])),e[33]):0,d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,4])).then(function(a){return a=a,e[37]=a[0],a})},function(a){return e[37]?e[43]=(e[33].push(d.i64.cast([0,4])),e[33]):0,e[38]=d.createArray(),e[39]=d.i64.of_int32(e[33].length),d.i64.gt(e[39],d.i64.cast([0,0]))?d.loopAsync(e[39],function(a){return e[43]=a,d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[33],e[43]).then(function(a){return a=a,e[44]=a[0],e[45]=a[1],a})},function(a){return e[46]=(e[38].push(e[44]),e[38])}])}):d.resolve()},function(a){return d.sequence([function(a){return e[43]=d.createArray(),e[44]=d.i64.of_int32(e[38].length),d.i64.gt(e[44],d.i64.cast([0,0]))?d.loopAsync(e[44],function(a){return e[46]=a,d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[38],e[46]).then(function(a){return a=a,e[47]=a[0],e[48]=a[1],a})},function(a){return e[49]=(e[43].push(d.i64.to_string(e[47])),e[43])}])}):d.resolve()},function(a){return e[45]=e[43].join(","),e[40]=e[45]}])},function(a){return e[38].some(function(a){return d.i64.eq(e[31],a)})?e[41]=e[31]:e[41]=void 0,d.i64.neq(e[41],void 0)?e[42]=e[41]:e[42]=void 0,e[28]=e[42]}])},function(a){return d.i64.neq(e[28],void 0)?e[29]=e[28]:e[29]=d.i64.cast([0,0]),d.i64.neq(e[32],void 0)?e[30]=e[32]:e[30]=d.i64.cast([0,1]),a=[c.backupId,c.deviceId,c.mailboxRootKeyBlob,c.ocmfClientStateBlob,void 0,void 0,e[29],e[30],c.epochAuthPublicKeyBlob,c.epochAuthPrivateKeyBlob,c.devicePublicKeyBlob,c.devicePrivateKeyBlob,c.epochStoragePublicKeyBlob,c.epochStoragePrivateKeyBlob,c.obliviousValidationTokenBlob,c.authorityLevel,void 0,void 0],e[1]=a[0],e[2]=a[1],e[3]=a[2],e[4]=a[3],e[5]=a[4],e[6]=a[5],e[7]=a[6],e[8]=a[7],e[9]=a[8],e[10]=a[9],e[11]=a[10],e[12]=a[11],e[13]=a[12],e[14]=a[13],e[15]=a[14],e[16]=a[15],e[17]=a[16],e[18]=a[17]}]))})},function(f){return d.i64.neq(e[1],void 0)?d.sequence([function(f){return d.db.table(174).fetch([[[d.i64.cast([0,1])]]]).next().then(function(f,g){var h=f.done;f=f.value;return h?d.sequence([function(a){return d.db.table(178).put({pk:d.i64.cast([0,1]),recoveryCodeStatus:d.i64.cast([0,3])})},function(a){return e[29]="Recovery code not created, will not create extra virtual device",e[29]!==void 0?(function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsCreateExtraVirtualDeviceStoredProcedure] ","",e[29]].join("")),e[30]=d.createArray(),void 0!==void 0?e[31]=(e[30].push(void 0),e[30]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsCreateExtraVirtualDeviceStoredProcedure",e[29],e[30],d.i64.cast([0,3]))):d.resolve()},function(a){return e[27]=d.i64.cast([0,1])}]):(g=f.item,d.sequence([function(a){return e[31]=g.recoveryCode,e[32]=g.virtualDeviceType,e[33]=g.cloudServiceAccount,e[34]=g.hsmPinNormalizationStatus,d.db.table(178).put({pk:d.i64.cast([0,1]),recoveryCodeStatus:d.i64.cast([0,1])})},function(a){return d.db.table(168).fetch().next().then(function(b,c){var a=b.done;b=b.value;return a?e[29]=d.i64.cast([0,1]):(c=b.item,e[36]=c.backupTenancy,d.i64.neq(e[36],void 0)?e[35]=e[36]:e[35]=d.i64.cast([0,1]),e[29]=e[35])})},function(f){return d.i64.eq(e[29],d.i64.cast([0,1]))&&e[31]==="1SHADOWTESTINGRECOVERYCODE00000000000000"?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] Invalid Recovery Code Used."),e[36]="Invalid Recovery Code Used.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] ","",e[36]].join("")),e[35]=d.createArray(),void 0!==void 0?e[37]=(e[35].push(void 0),e[35]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure",e[36],e[35],d.i64.cast([0,3]))):d.sequence([function(a){return e[35]=d.createArray(),d.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,e[36]=a[0],a})},function(a){return d.nativeOperation(b("LSParseRecoveryCode_v2.nop"),e[31],void 0==null?d.i64.to_string(e[36]):void 0,e[35]).then(function(a){return a=a,e[37]=a[0],e[38]=a[1],a})},function(f){return d.blobs.neq(e[38],void 0)?d.blobs.neq(e[37],void 0)?d.sequence([function(a){return d.storedProcedure(b("LSGetOpenEpochKeys"),!1).then(function(a){return a=a,e[39]=a[0],a})},function(f){return e[39]!==void 0?d.sequence([function(a){return e[106]=c("justknobx")._("1310"),void 0!==void 0?e[106]?d.sequence([function(a){return void 0!==void 0?d.storedProcedure(b("LSAppendDataTraceAddon"),void 0,d.i64.cast([0,2866]),d.i64.cast([0,2]),void 0,void 0):d.resolve()},function(a){return d.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,e[116]=a[0],a})},function(a){return e[116]?e[117]=!0:e[117]=!1,e[117]&&!0?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[119]="LSDataTraceMciTraceLog native op not supported",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",e[119]].join("")),e[118]=d.createArray(),void 0!==void 0?e[120]=(e[118].push(void 0),e[118]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",e[119],e[118],d.i64.cast([0,3]))):d.resolve()}]):d.sequence([function(a){return void 0!==void 0?d.storedProcedure(b("LSAppendDataTraceAddon"),void 0,d.i64.cast([0,2867]),d.i64.cast([0,2]),void 0,void 0):d.resolve()},function(a){return d.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,e[116]=a[0],a})},function(a){return e[116]?e[117]=!0:e[117]=!1,e[117]&&!0?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[119]="LSDataTraceMciTraceLog native op not supported",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",e[119]].join("")),e[118]=d.createArray(),void 0!==void 0?e[120]=(e[118].push(void 0),e[118]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",e[119],e[118],d.i64.cast([0,3]))):d.resolve()}]):d.resolve()},function(a){return e[106]?d.resolve():d.sequence([function(a){return d.count(d.db.table(169).fetch()).then(function(a){return e[116]=a})},function(a){return d.i64.gt(e[116],d.i64.cast([0,1]))?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] Multiple rows in $epoch_tables."),e[118]="Multiple rows in $epoch_tables.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] ","",e[118]].join("")),e[117]=d.createArray(),void 0!==void 0?e[119]=(e[117].push(void 0),e[117]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure",e[118],e[117],d.i64.cast([0,3]))):d.resolve()}])},function(a){return d.nativeOperation(b("LSCreateSignatureKeyPair.nop")).then(function(a){return a=a,e[40]=a[0],e[41]=a[1],a})},function(a){return d.nativeOperation(b("LSCreateEncryptionKeyPair.nop")).then(function(a){return a=a,e[42]=a[0],e[43]=a[1],a})},function(a){return d.nativeOperation(b("LSCreateSignature_v2.nop"),e[40],d.blob("MA=="),e[43]).then(function(a){return a=a,e[44]=a[0],a})},function(a){return e[107]=d.blob(""),e[108]=d.blob(""),e[109]=d.blob(""),d.db.table(168).fetch([[[e[1]]]]).next().then(function(c,f){var a=c.done;c=c.value;return a?d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] Row with backupid not found in client state table"),e[117]="Row with backupid not found in client state table",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] ","",e[117]].join("")),e[116]=d.createArray(),void 0!==void 0?e[118]=(e[116].push(void 0),e[116]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure",e[117],e[116],d.i64.cast([0,3]))},function(a){return a=[e[107],e[108],void 0,e[109]],e[45]=a[0],e[46]=a[1],e[47]=a[2],e[48]=a[3],a}]):(f=c.item,a=[f.obliviousValidationTokenBlob,f.mailboxRootKeyBlob,f.deviceId,f.ocmfClientStateBlob],e[45]=a[0],e[46]=a[1],e[47]=a[2],e[48]=a[3])})},function(a){return d.blobs.eq(e[45],e[107])?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] oblivious_token is empty!"),e[117]="oblivious_token is empty!",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] ","",e[117]].join("")),e[116]=d.createArray(),void 0!==void 0?e[118]=(e[116].push(void 0),e[116]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure",e[117],e[116],d.i64.cast([0,3]))):d.resolve()},function(a){return d.blobs.eq(e[46],e[108])?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] mailbox_root_key is empty!"),e[117]="mailbox_root_key is empty!",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] ","",e[117]].join("")),e[116]=d.createArray(),void 0!==void 0?e[118]=(e[116].push(void 0),e[116]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure",e[117],e[116],d.i64.cast([0,3]))):d.resolve()},function(a){return d.blobs.eq(e[48],e[109])?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] ocmf_client_state is empty!"),e[117]="ocmf_client_state is empty!",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] ","",e[117]].join("")),e[116]=d.createArray(),void 0!==void 0?e[118]=(e[116].push(void 0),e[116]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure",e[117],e[116],d.i64.cast([0,3]))):d.resolve()},function(a){return e[50]=e[39].get("epoch_anon_id"),e[51]=e[39].get("epoch_root_key"),e[52]=d.createArray(),e[116]=(e[52].push(d.i64.cast([0,32])),e[52]),d.nativeOperation(b("LSBase64Encode.nop"),e[50]).then(function(a){return a=a,e[53]=a[0],a})},function(a){return e[53]!==void 0?d.sequence([function(a){return d.nativeOperation(b("LSCreateDerivedKeys.nop"),d.blobs.of_string(["epoch_devices","_",e[53]].join("")),void 0,e[51],e[52]).then(function(a){return a=a,e[116]=a[0],a})},function(a){return e[116]?e[117]=!1:e[117]=!0,e[117]?d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoEpochUtils] THIS IS NOT EXPECTED. Found null keys while deriving keys for epoch. Returning empty blobish"),e[120]="THIS IS NOT EXPECTED. Found null keys while deriving keys for epoch. Returning empty blobish",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoEpochUtils] ","",e[120]].join("")),e[119]=d.createArray(),void 0!==void 0?e[122]=(e[119].push(void 0),e[119]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoEpochUtils",e[120],e[119],d.i64.cast([0,3]))},function(a){return d.nativeOperation(b("LSGetBlobFromString.nop"),"").then(function(a){return a=a,e[121]=a[0],a})},function(a){return e[118]=e[121]}]):d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[116],d.i64.cast([0,0])).then(function(a){return a=a,e[119]=a[0],e[120]=a[1],a})},function(a){return e[118]=e[119]}])},function(a){return e[54]=e[118]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoEpochUtils] THIS IS NOT EXPECTED. Failed to base64 encode epoch anon id. Returning empty blobish"),e[117]="THIS IS NOT EXPECTED. Failed to base64 encode epoch anon id. Returning empty blobish",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoEpochUtils] ","",e[117]].join("")),e[116]=d.createArray(),void 0!==void 0?e[119]=(e[116].push(void 0),e[116]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoEpochUtils",e[117],e[116],d.i64.cast([0,3]))},function(a){return d.nativeOperation(b("LSGetBlobFromString.nop"),"").then(function(a){return a=a,e[118]=a[0],a})},function(a){return e[54]=e[118]}])},function(a){return d.nativeOperation(b("LSHmac_v2.nop"),e[54],e[41]).then(function(a){return a=a,e[55]=a[0],a})},function(a){return d.blobs.neq(e[55],void 0)?d.resolve(e[56]=e[55]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] device_epoch_hmac is null!"),e[117]="device_epoch_hmac is null!",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] ","",e[117]].join("")),e[116]=d.createArray(),void 0!==void 0?e[119]=(e[116].push(void 0),e[116]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure",e[117],e[116],d.i64.cast([0,3]))},function(a){return d.nativeOperation(b("LSGetBlobFromString.nop"),"").then(function(a){return a=a,e[118]=a[0],a})},function(a){return e[56]=e[118]}])},function(a){return e[57]=e[39].get("epoch_root_key"),d.blobs.neq(e[57],void 0)?d.sequence([function(a){return e[116]=d.createArray(),e[122]=(e[116].push(d.i64.cast([0,18])),e[116]),d.nativeOperation(b("LSCreateDerivedKeys.nop"),d.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,e[57],e[116]).then(function(a){return a=a,e[117]=a[0],a})},function(a){return e[117]!==void 0?d.sequence([function(a){return e[122]=d.i64.of_int32(e[117].length),d.i64.ge(e[122],d.i64.cast([0,1]))?d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[117],d.i64.cast([0,0])).then(function(a){return a=a,e[124]=a[0],e[125]=a[1],a})},function(a){return e[123]=e[124]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),e[125]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",e[125]].join("")),e[124]=d.createArray(),void 0!==void 0?e[126]=(e[124].push(void 0),e[124]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",e[125],e[124],d.i64.cast([0,3]))},function(a){return e[123]=void 0}])},function(a){return e[118]=e[123]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),e[123]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",e[123]].join("")),e[122]=d.createArray(),void 0!==void 0?e[124]=(e[122].push(void 0),e[122]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",e[123],e[122],d.i64.cast([0,3]))},function(a){return e[118]=void 0}])},function(a){return d.blobs.neq(e[118],void 0)?e[119]=!0:e[119]=!1,e[119]?0:(function(a){d.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),d["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),d.nativeOperation(b("LSBase64Encode.nop"),e[118]).then(function(a){return a=a,e[120]=a[0],a})},function(a){return e[120]!==void 0?e[121]=e[120]:e[121]="encodingfailed",e[58]=e[121]}]):d.resolve(e[58]="null")},function(a){return d.nativeOperation(b("LSOcmfClientEvolve_v2.nop"),e[48]).then(function(a){return a=a,e[59]=a[0],e[60]=a[1],a})},function(a){return d.blobs.neq(void 0,void 0)?d.sequence([function(a){return d.nativeOperation(b("LSOcmfClientEvolve_v2.nop"),void 0).then(function(a){return a=a,e[116]=a[0],e[117]=a[1],a})},function(a){return a=[e[59],e[60],e[116],e[117]],e[61]=a[0],e[62]=a[1],e[63]=a[2],e[64]=a[3],a}]):d.resolve((a=[e[59],e[60],void 0,void 0],e[61]=a[0],e[62]=a[1],e[63]=a[2],e[64]=a[3],a))},function(a){return d.nativeOperation(b("LSBase64Encode.nop"),e[40]).then(function(a){return a=a,e[65]=a[0],a})},function(a){return d.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedString.nop"),e[38],d.blob("dmlydHVhbF9kZXZpY2U6dmlydHVhbF9kZXZpY2VfcHJpdmF0ZV9rZXk="),e[65]==null?"":e[65]).then(function(a){return a=a,e[66]=a[0],a})},function(a){return e[66]!==void 0?e[67]=e[66]:e[67]="",e[67]===""?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] encrypted_device_private_key is empty!"),e[117]="encrypted_device_private_key is empty!",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] ","",e[117]].join("")),e[116]=d.createArray(),void 0!==void 0?e[118]=(e[116].push(void 0),e[116]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure",e[117],e[116],d.i64.cast([0,3]))):d.resolve()},function(a){return d.nativeOperation(b("LSBase64Encode.nop"),e[42]).then(function(a){return a=a,e[68]=a[0],a})},function(a){return d.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedString.nop"),e[38],d.blob("dmlydHVhbF9kZXZpY2U6ZXBvY2hfc3RvcmFnZV9wcml2YXRlX2tleQ=="),e[68]==null?"":e[68]).then(function(a){return a=a,e[69]=a[0],a})},function(a){return e[69]!==void 0?e[70]=e[69]:e[70]="",e[70]===""?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] encrypted_epoch_storage_private_key is empty!"),e[117]="encrypted_epoch_storage_private_key is empty!",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] ","",e[117]].join("")),e[116]=d.createArray(),void 0!==void 0?e[118]=(e[116].push(void 0),e[116]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure",e[117],e[116],d.i64.cast([0,3]))):d.resolve()},function(a){return d.nativeOperation(b("LSBase64Encode.nop"),e[61]).then(function(a){return a=a,e[71]=a[0],a})},function(a){return d.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedString.nop"),e[38],d.blob("dmlydHVhbF9kZXZpY2U6b2NtZl9jbGllbnRfc3RhdGU="),e[71]==null?"":e[71]).then(function(a){return a=a,e[72]=a[0],a})},function(a){return e[72]!==void 0?e[73]=e[72]:e[73]="",e[73]===""?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] encrypted_orf_client_state_v1_shape is empty!"),e[117]="encrypted_orf_client_state_v1_shape is empty!",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] ","",e[117]].join("")),e[116]=d.createArray(),void 0!==void 0?e[118]=(e[116].push(void 0),e[116]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure",e[117],e[116],d.i64.cast([0,3]))):d.resolve()},function(a){return d.nativeOperation(b("LSBase64Encode.nop"),e[45]).then(function(a){return a=a,e[74]=a[0],a})},function(a){return d.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedString.nop"),e[38],d.blob("dmlydHVhbF9kZXZpY2U6b2JsaXZpb3VzX3ZhbGlkYXRpb25fdG9rZW4="),e[74]==null?"":e[74]).then(function(a){return a=a,e[75]=a[0],a})},function(a){return e[75]!==void 0?e[76]=e[75]:e[76]="",e[76]===""?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] encrypted_oblivious_validation_token is empty!"),e[117]="encrypted_oblivious_validation_token is empty!",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] ","",e[117]].join("")),e[116]=d.createArray(),void 0!==void 0?e[118]=(e[116].push(void 0),e[116]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure",e[117],e[116],d.i64.cast([0,3]))):d.resolve()},function(a){return d.nativeOperation(b("LSBase64Encode.nop"),e[46]).then(function(a){return a=a,e[77]=a[0],a})},function(a){return d.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedString.nop"),e[38],d.blob("dmlydHVhbF9kZXZpY2U6bWFpbGJveF9yb290X2tleQ=="),e[77]==null?"":e[77]).then(function(a){return a=a,e[78]=a[0],a})},function(a){return e[78]!==void 0?e[79]=e[78]:e[79]="",e[79]===""?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] encrypted_mailbox_root_key is empty!"),e[117]="encrypted_mailbox_root_key is empty!",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] ","",e[117]].join("")),e[116]=d.createArray(),void 0!==void 0?e[118]=(e[116].push(void 0),e[116]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure",e[117],e[116],d.i64.cast([0,3]))):d.resolve()},function(a){return e[80]=e[39].get("epoch_anon_id"),d.nativeOperation(b("LSBase64Encode.nop"),e[80]).then(function(a){return a=a,e[81]=a[0],a})},function(a){return d.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedString.nop"),e[38],d.blob("dmlydHVhbF9kZXZpY2U6ZXBvY2hfYW5vbl9pZA=="),e[81]==null?"":e[81]).then(function(a){return a=a,e[82]=a[0],a})},function(a){return e[82]!==void 0?e[83]=e[82]:e[83]="",e[83]===""?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] encrypted_epoch_anon_id is empty!"),e[117]="encrypted_epoch_anon_id is empty!",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] ","",e[117]].join("")),e[116]=d.createArray(),void 0!==void 0?e[118]=(e[116].push(void 0),e[116]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure",e[117],e[116],d.i64.cast([0,3]))):d.resolve()},function(a){return e[84]=e[39].get("epoch_root_key"),d.nativeOperation(b("LSBase64Encode.nop"),e[84]).then(function(a){return a=a,e[85]=a[0],a})},function(a){return d.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedString.nop"),e[38],d.blob("dmlydHVhbF9kZXZpY2U6ZXBvY2hfcm9vdF9rZXk="),e[85]==null?"":e[85]).then(function(a){return a=a,e[86]=a[0],a})},function(a){return e[86]!==void 0?e[87]=e[86]:e[87]="",e[87]===""?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] encrypted_epoch_root_key is empty!"),e[117]="encrypted_epoch_root_key is empty!",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] ","",e[117]].join("")),e[116]=d.createArray(),void 0!==void 0?e[118]=(e[116].push(void 0),e[116]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure",e[117],e[116],d.i64.cast([0,3]))):d.resolve()},function(a){return e[88]=new d.Map(),e[88].set("encrypted_device_private_key",e[67]),e[88].set("encrypted_epoch_storage_private_key",e[70]),e[88].set("encrypted_ocmf_client_state",e[73]),e[88].set("encrypted_orf_client_state_v2",void 0),e[88].set("encrypted_oblivious_validation_token_blob",e[76]),e[88].set("encrypted_mailbox_root_key_blob",e[79]),e[88].set("encrypted_epoch_anon_id",e[83]),e[88].set("encrypted_epoch_root_key",e[87]),d.nativeOperation(b("LSBase64Encode.nop"),e[37]).then(function(a){return a=a,e[89]=a[0],a})},function(a){return e[110]=e[89]==null?"":e[89],d.nativeOperation(b("LSBase64Encode.nop"),e[41]).then(function(a){return a=a,e[90]=a[0],a})},function(a){return e[111]=e[90]==null?"":e[90],d.nativeOperation(b("LSBase64Encode.nop"),e[43]).then(function(a){return a=a,e[91]=a[0],a})},function(a){return e[112]=e[91]==null?"":e[91],d.nativeOperation(b("LSBase64Encode.nop"),e[44]==null?d.blob("bnVsbA=="):e[44]).then(function(a){return a=a,e[92]=a[0],a})},function(a){return e[113]=e[92]==null?"":e[92],d.nativeOperation(b("LSBase64Encode.nop"),e[56]).then(function(a){return a=a,e[93]=a[0],a})},function(a){return e[114]=e[93]==null?"":e[93],d.nativeOperation(b("LSBase64Encode.nop"),e[62]).then(function(a){return a=a,e[94]=a[0],a})},function(a){return e[115]=e[94]==null?"":e[94],d.nativeOperation(b("LSGetBlobFromString.nop"),e[31]).then(function(a){return a=a,e[95]=a[0],a})},function(a){return d.blobs.neq(e[46],void 0)?d.sequence([function(a){return e[116]=new d.Map(),d.nativeOperation(b("LSCreateDebugToken.nop"),e[46],"private_key",e[40],d.i64.cast([0,1]),e[116]).then(function(a){return a=a,e[117]=a[0],a})},function(a){return d.blobs.neq(e[117],void 0)?e[118]=e[117]:e[118]=void 0,e[96]=e[118]}]):d.resolve(e[96]=void 0)},function(a){return d.blobs.neq(e[96],void 0)?d.sequence([function(a){return d.nativeOperation(b("LSBase64Encode.nop"),e[96]).then(function(a){return a=a,e[116]=a[0],a})},function(a){return e[97]=e[116]}]):d.resolve(e[97]=void 0)},function(a){return d.blobs.neq(e[46],void 0)?d.sequence([function(a){return e[116]=new d.Map(),d.nativeOperation(b("LSCreateDebugToken.nop"),e[46],"ocmf_client_state",e[61],d.i64.cast([0,1]),e[116]).then(function(a){return a=a,e[117]=a[0],a})},function(a){return d.blobs.neq(e[117],void 0)?e[118]=e[117]:e[118]=void 0,e[98]=e[118]}]):d.resolve(e[98]=void 0)},function(a){return d.blobs.neq(e[98],void 0)?d.sequence([function(a){return d.nativeOperation(b("LSBase64Encode.nop"),e[98]).then(function(a){return a=a,e[116]=a[0],a})},function(a){return e[99]=e[116]}]):d.resolve(e[99]=void 0)},function(a){return d.blobs.neq(e[46],void 0)?d.sequence([function(a){return e[116]=new d.Map(),d.nativeOperation(b("LSCreateDebugToken.nop"),e[46],"epoch_storage_private_key",e[42],d.i64.cast([0,1]),e[116]).then(function(a){return a=a,e[117]=a[0],a})},function(a){return d.blobs.neq(e[117],void 0)?e[118]=e[117]:e[118]=void 0,e[100]=e[118]}]):d.resolve(e[100]=void 0)},function(a){return d.blobs.neq(e[100],void 0)?d.sequence([function(a){return d.nativeOperation(b("LSBase64Encode.nop"),e[100]).then(function(a){return a=a,e[116]=a[0],a})},function(a){return e[101]=e[116]}]):d.resolve(e[101]=void 0)},function(a){return d.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,e[102]=a[0],a})},function(a){return d.nativeOperation(b("LSGetBlobFromString.nop"),d.i64.to_string(e[102])).then(function(a){return a=a,e[103]=a[0],a})},function(a){return d.blobs.neq(e[103],void 0)?d.sequence([function(a){return e[116]=new d.Map(),d.nativeOperation(b("LSCreateDebugToken.nop"),e[103],"recovery_code",e[95],d.i64.cast([0,1]),e[116]).then(function(a){return a=a,e[117]=a[0],a})},function(a){return d.blobs.neq(e[117],void 0)?e[118]=e[117]:e[118]=void 0,e[104]=e[118]}]):d.resolve(e[104]=void 0)},function(a){return d.blobs.neq(e[104],void 0)?d.sequence([function(a){return d.nativeOperation(b("LSBase64Encode.nop"),e[104]).then(function(a){return a=a,e[116]=a[0],a})},function(a){return e[105]=e[116]}]):d.resolve(e[105]=void 0)},function(c){return d.i64.neq(e[47],void 0)?d.sequence([function(a){return e[116]=e[39].get("epoch_id"),d.db.table(168).fetch().next().then(function(b,c){var a=b.done;b=b.value;return a?e[117]=d.i64.cast([0,1]):(c=b.item,e[122]=c.backupTenancy,d.i64.neq(e[122],void 0)?e[121]=e[122]:e[121]=d.i64.cast([0,1]),e[117]=e[121])})},function(a){return d.i64.eq(e[117],d.i64.cast([0,2]))?d.resolve(e[119]=void 0):d.sequence([function(a){return d.nativeOperation(b("LSGetArmadilloPublicKey.nop")).then(function(a){return a=a,e[121]=a[0],a})},function(a){return e[119]=e[121]}])},function(a){return d.blobs.neq(e[119],void 0)?d.sequence([function(a){return d.nativeOperation(b("LSCreateSignatureWithArmadilloKey.nop"),e[41]).then(function(a){return a=a,e[121]=a[0],a})},function(a){return d.blobs.neq(e[121],void 0)?d.resolve(e[122]=e[121]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoKeySigningUtils] Failed to create labyrinth signature"),e[127]="Failed to create labyrinth signature",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoKeySigningUtils] ","",e[127]].join("")),e[126]=d.createArray(),void 0!==void 0?e[128]=(e[126].push(void 0),e[126]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoKeySigningUtils",e[127],e[126],d.i64.cast([0,3]))},function(a){return e[122]=void 0}])},function(a){return d.nativeOperation(b("LSCreateSignature_v2.nop"),e[40],d.blob("Mw=="),e[119]).then(function(a){return a=a,e[123]=a[0],a})},function(a){return d.blobs.neq(e[123],void 0)?d.resolve(e[124]=e[123]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoKeySigningUtils] Failed to create armadillo signature"),e[127]="Failed to create armadillo signature",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoKeySigningUtils] ","",e[127]].join("")),e[126]=d.createArray(),void 0!==void 0?e[128]=(e[126].push(void 0),e[126]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoKeySigningUtils",e[127],e[126],d.i64.cast([0,3]))},function(a){return e[124]=void 0}])},function(a){return d.blobs.neq(e[124],void 0)?(d.blobs.neq(e[122],void 0)?(e[127]=new d.Map(),e[127].set("armadillo_public_key",e[119]),e[127].set("armadillo_key_signature",e[124]),e[127].set("labyrinth_key_signature",e[122]),e[126]=e[127]):e[126]=void 0,e[125]=e[126]):e[125]=void 0,e[120]=e[125]}]):d.resolve(e[120]=void 0)},function(c){return e[120]!==void 0?d.sequence([function(a){return e[121]=e[120].get("armadillo_public_key"),d.nativeOperation(b("LSBase64Encode.nop"),e[121]).then(function(a){return a=a,e[122]=a[0],a})},function(a){return e[123]=e[120].get("armadillo_key_signature"),d.nativeOperation(b("LSBase64Encode.nop"),e[123]).then(function(a){return a=a,e[124]=a[0],a})},function(a){return e[125]=e[120].get("labyrinth_key_signature"),d.nativeOperation(b("LSBase64Encode.nop"),e[125]).then(function(a){return a=a,e[126]=a[0],a})},function(c){return e[127]=new d.Map(),e[127].set("backup_id",e[1]),e[127].set("request_device_id",e[47]),e[127].set("virtual_device_id",e[110]),e[127].set("encrypted_secret_values",e[88]),e[127].set("public_key",e[111]),e[127].set("epoch_storage_pubkey",e[112]),e[127].set("epoch_storage_pubkey_sig",e[113]),e[127].set("device_epoch_hmac",e[114]),e[127].set("epoch_root_key_fingerprint",e[58]),e[127].set("ocmf_rotation_token",e[115]),e[127].set("is_init",!1),e[127].set("epoch_id",e[116]),e[127].set("virtual_device_type",e[32]),e[127].set("action_type",a[0]),e[127].set("private_key_debug_token",e[97]),e[127].set("ocmf_client_state_debug_token",e[99]),e[127].set("epoch_storage_pvtkey_debug_token",e[101]),e[127].set("recovery_code_debug_token",e[105]),e[127].set("trace_id",void 0),e[127].set("cloud_service_account",e[33]),e[127].set("hsm_pin_normalization_status",e[34]),e[127].set("security_question_type",void 0),e[127].set("trusted_contact_id",void 0),e[127].set("armadillo_public_key",e[122]==null?"":e[122]),e[127].set("armadillo_key_signature",e[124]==null?"":e[124]),e[127].set("labyrinth_key_signature",e[126]==null?"":e[126]),e[128]=d.toJSON(e[127]),d.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),"encrypted_backups_setup",d.i64.cast([0,50004]),e[128],d.i64.cast([0,0]),d.i64.cast([0,93]),d.i64.cast([0,0]),void 0,d.i64.cast([0,0])).then(function(a){return a=a,e[129]=a[0],a})}]):(function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] failed to get armadillo key and device signatures"),e[121]=new d.Map(),e[121].set("backup_id",e[1]),e[121].set("request_device_id",e[47]),e[121].set("virtual_device_id",e[110]),e[121].set("encrypted_secret_values",e[88]),e[121].set("public_key",e[111]),e[121].set("epoch_storage_pubkey",e[112]),e[121].set("epoch_storage_pubkey_sig",e[113]),e[121].set("device_epoch_hmac",e[114]),e[121].set("epoch_root_key_fingerprint",e[58]),e[121].set("ocmf_rotation_token",e[115]),e[121].set("is_init",!1),e[121].set("epoch_id",e[116]),e[121].set("virtual_device_type",e[32]),e[121].set("action_type",a[0]),e[121].set("private_key_debug_token",e[97]),e[121].set("ocmf_client_state_debug_token",e[99]),e[121].set("epoch_storage_pvtkey_debug_token",e[101]),e[121].set("recovery_code_debug_token",e[105]),e[121].set("trace_id",void 0),e[121].set("cloud_service_account",e[33]),e[121].set("hsm_pin_normalization_status",e[34]),e[121].set("security_question_type",void 0),e[121].set("trusted_contact_id",void 0),e[122]=d.toJSON(e[121]),d.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),"encrypted_backups_setup",d.i64.cast([0,50004]),e[122],d.i64.cast([0,0]),d.i64.cast([0,93]),d.i64.cast([0,0]),void 0,d.i64.cast([0,0])).then(function(a){return a=a,e[123]=a[0],a}))}]):d.storedProcedure(b("LSHandleCreateVirtualDeviceFailure"),e[1],!1,void 0)}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] Epoch keys are unavailable."),e[41]="Epoch keys are unavailable.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] ","",e[41]].join("")),e[40]=d.createArray(),void 0!==void 0?e[42]=(e[40].push(void 0),e[40]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure",e[41],e[40],d.i64.cast([0,3]))},function(a){return d.storedProcedure(b("LSHandleCreateVirtualDeviceFailure"),e[1],!1,void 0)}])}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] Invalid Recovery Code Provided"),e[40]="Invalid Recovery Code Provided",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] ","",e[40]].join("")),e[39]=d.createArray(),void 0!==void 0?e[41]=(e[39].push(void 0),e[39]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure",e[40],e[39],d.i64.cast([0,3]))},function(a){return d.storedProcedure(b("LSHandleCreateVirtualDeviceFailure"),e[1],!1,void 0)}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] Invalid Recovery Code Provided"),e[40]="Invalid Recovery Code Provided",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure] ","",e[40]].join("")),e[39]=d.createArray(),void 0!==void 0?e[41]=(e[39].push(void 0),e[39]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsCreateVirtualDeviceV2StoredProcedure",e[40],e[39],d.i64.cast([0,3]))},function(a){return d.storedProcedure(b("LSHandleCreateVirtualDeviceFailure"),e[1],!1,void 0)}])}])},function(a){return e[27]=d.i64.cast([0,0])}]))})},function(a){return e[20]=e[27]}]):d.sequence([function(a){return d.db.table(178).put({pk:d.i64.cast([0,1]),recoveryCodeStatus:d.i64.cast([0,3])})},function(a){return e[27]="Backup is not initalized",e[27]!==void 0?(function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsCreateExtraVirtualDeviceStoredProcedure] ","",e[27]].join("")),e[28]=d.createArray(),void 0!==void 0?e[29]=(e[28].push(void 0),e[28]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsCreateExtraVirtualDeviceStoredProcedure",e[27],e[28],d.i64.cast([0,3]))):d.resolve()},function(a){return d.forEach(d.db.table(174).fetch(),function(a){return a["delete"]()})},function(a){return e[20]=d.i64.cast([0,1])}])},function(a){return e[21]=d.i64.of_float(Date.now()),e[22]=d.i64.random(),e[24]="Finishing execution. Execution time: ",e[25]=d.i64.to_string(d.i64.sub(e[21],e[0])),e[26]=" ms",e[23]="",function(a){d.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsCreateExtraVirtualDeviceStoredProcedure] ",e[23],e[24],e[23],e[25],e[23],e[26]].join("")),d.i64.eq(d.i64.mod_(e[22],d.i64.cast([0,1e3])),d.i64.cast([0,0]))?(e[27]=",",e[28]=d.createArray(),void 0!==void 0?e[29]=(e[28].push(void 0),e[28]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsCreateExtraVirtualDeviceStoredProcedure",[e[24],e[27],e[25],e[27],e[26]].join(""),e[28],d.i64.cast([0,4]))):d.resolve()},function(a){return f[0]=e[20]}])},function(a){return d.resolve(f)}])}a.__sproc_name__="LSEncryptedBackupsCreateExtraVirtualDeviceStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","secure_encrypted_backups_generated_recovery_code","secure_encrypted_backups_recovery_code_status","secure_encrypted_backups_epochs"];d=a;g["default"]=d}),98);
__d("LSCreateExtraVirtualDeviceStoredProcedure",["LSCreateExtraVirtualDevice","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSCreateExtraVirtualDevice"),e.actionType,e.traceId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSCreateRecoveryCode.nop",["CryptoLogger","GF32RecoveryCodes","GaloisField32","LSResult","Promise","UInt8Array"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){while(!0){var b=d("UInt8Array").getBufferWithRandomValuesFromLength(1);b=new Uint8Array(b)[0];if(b<256-256%a)return b%a;continue}return 0}a=function(a,e){a=["2","0"].join("");try{e=[];for(var f=0;f<=33;++f)e.push(i(32));f=d("GF32RecoveryCodes").getEccForCode(d("GaloisField32").asGf32MatExn(e));e=e.concat(f);f=d("GaloisField32").matrixToSymbols(d("GaloisField32").asGf32MatExn(e));e=a+f;return(h||(h=b("Promise"))).resolve(c("LSResult")(e))}catch(a){d("CryptoLogger").captureError(d("CryptoLogger").CryptoLogger("create_recovery_code"),a).mustfix("creating recovery code failed");throw a}};a.__nop_name__="LSCreateRecoveryCode";g["default"]=a}),98);
__d("LSEncryptedBackupsCreateVirtualDeviceActionType",[],(function(a,b,c,d,e,f){a=Object.freeze({INSERT:1,UNIQUE_VD_TYPE_INSERT:2});f["default"]=a}),66);
__d("LSGenerateRecoveryCode",["LSCreateRecoveryCode.nop","LSGetViewerFBID","LSLogMebClientEvent.nop","LSParseRecoveryCode_v2.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsGenerateRecoveryCodeStoredProcedure] Beginning execution."),c.forEach(c.filter(c.db.table(174).fetch(),function(a){return a.recoveryCode==="1SHADOWTESTINGRECOVERYCODE00000000000000"}),function(a){return a["delete"]()})},function(a){return c.db.table(174).fetch([[[c.i64.cast([0,1])]]]).next().then(function(a,e){var f=a.done;a=a.value;return f?c.sequence([function(a){return c.nativeOperation(b("LSCreateRecoveryCode.nop")).then(function(a){return a=a,d[15]=a[0],a})},function(a){return c.db.table(174).add({pk:c.i64.cast([0,1]),recoveryCode:d[15]})},function(a){return d[1]=d[15]}]):(e=a.item,d[1]=e.recoveryCode)})},function(b){return c.forEach(c.db.table(174).fetch([[[c.i64.cast([0,1])]]]),function(b){var c=b.update;b.item;return c({virtualDeviceType:a[0],cloudServiceAccount:void 0,hsmPinNormalizationStatus:void 0})})},function(a){return d[3]=c.createArray(),c.db.table(172).fetch().next().then(function(a,b){var e=a.done;a=a.value;return e?d[4]=void 0:(b=a.item,d[16]=b.encryptionManagementDelegatorId,c.i64.neq(d[16],void 0)?(c.i64.neq(d[16],c.i64.cast([0,0]))?d[17]=c.i64.to_string(d[16]):d[17]=void 0,d[15]=d[17]):d[15]=void 0,d[4]=d[15])})},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[6]=a[0],a})},function(a){return c.nativeOperation(b("LSParseRecoveryCode_v2.nop"),d[1],d[4]==null?c.i64.to_string(d[6]):d[4],d[3]).then(function(a){return a=a,d[7]=a[0],d[8]=a[1],a})},function(a){return d[9]=c.i64.of_float(Date.now()),d[10]=c.i64.random(),d[12]="Finishing execution. Execution time: ",d[13]=c.i64.to_string(c.i64.sub(d[9],d[0])),d[14]=" ms",d[11]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsGenerateRecoveryCodeStoredProcedure] ",d[11],d[12],d[11],d[13],d[11],d[14]].join("")),c.i64.eq(c.i64.mod_(d[10],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[15]=",",d[16]=c.createArray(),void 0!==void 0?d[17]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsGenerateRecoveryCodeStoredProcedure",[d[12],d[15],d[13],d[15],d[14]].join(""),d[16],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[1],c.i64.cast([0,0]),d[7]],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsGenerateRecoveryCodeStoredProcedure";a.__tables__=["secure_encrypted_backups_generated_recovery_code","encrypted_backups"];e.exports=a}),null);
__d("LSGenerateRecoveryCodeStoredProcedure",["LSGenerateRecoveryCode","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSGenerateRecoveryCode"),e.virtualDeviceType);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWEncryptedBackupsInitializeBackupDeferred",["EBSMAPI","MWChatEncryptedBackupsQPLEvents","QPLUserFlow","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.onBackupCreationSuccess,e=a.onFailure,f=a.onStart,g=a.qplEventName,h=g===void 0?d("MWChatEncryptedBackupsQPLEvents").backupSetupQplEvent:g,i=a.instanceKey;f==null||f();c("QPLUserFlow").addPoint(h,"SETUP_INITIALIZE_BACKUP_SPROC_START",{instanceKey:i});c("promiseDone")(c("EBSMAPI").initializeBackup({instanceKey:i}),function(a){a.success?(c("QPLUserFlow").addPoint(h,"SETUP_INITIALIZE_BACKUP_SPROC_END",{instanceKey:i}),c("QPLUserFlow").addPoint(h,"SETUP_INITIALIZE_BACKUP_END",{instanceKey:i}),b==null||b()):(c("QPLUserFlow").markError(h,"SETUP_INITIALIZE_BACKUP_SPROC_FAILURE",{instanceKey:i}),e())},function(){c("QPLUserFlow").markError(h,"SETUP_INITIALIZE_BACKUP_SPROC_FAILURE",{instanceKey:i}),e()})}g.initializeBackupDeferred=a}),98);
__d("MWChatEncryptedBackupsPinCodeConfirmStepContentWrapper.react",["FocusRegion.react","MWChatEncryptedBackupsNumericCodeErrorWrapper.react","MWChatEncryptedBackupsNumericCodeInput.react","focusScopeQueries","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["error","inputSize","isMessenger"],i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(14);if(b[0]!==a){var e=a.error,f=a.inputSize;a.isMessenger;var g=babelHelpers.objectWithoutPropertiesLoose(a,h);e=e;f=f;g=g;b[0]=a;b[1]=e;b[2]=g;b[3]=f}else e=b[1],g=b[2],f=b[3];a=f===void 0?"large":f;b[4]!==g||b[5]!==a?(f=j.jsx(c("MWChatEncryptedBackupsNumericCodeInput.react"),babelHelpers["extends"]({testid:void 0},g,{inputSize:a})),b[4]=g,b[5]=a,b[6]=f):f=b[6];var i;b[7]!==g.focusRegionId||b[8]!==f?(i=j.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").tabbableScopeQuery,id:g.focusRegionId,children:f}),b[7]=g.focusRegionId,b[8]=f,b[9]=i):i=b[9];b[10]!==e||b[11]!==a||b[12]!==i?(g=j.jsx(c("MWChatEncryptedBackupsNumericCodeErrorWrapper.react"),{error:e,inputSize:a,children:i}),b[10]=e,b[11]=a,b[12]=i,b[13]=g):g=b[13];return g}g["default"]=a}),98);
__d("MWChatEncryptedBackupsUpsellJewelChatTabLayout.react",["CometScrollView.react","MWXColumnItem.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b,e=d("react-compiler-runtime").c(18),f=a.bottomItem,g=a.children,h=a.ref,j=a.size;a=a.topItem;b=(b=a==null?void 0:a.align)!=null?b:"start";j=j==="small"?8:16;var k;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(k={className:"x21xpn4"},e[0]=k):k=e[0];a=a==null?void 0:a.item;e[1]!==a?(k=i.jsx("div",babelHelpers["extends"]({},k,{children:a})),e[1]=a,e[2]=k):k=e[2];e[3]!==b||e[4]!==j||e[5]!==k?(a=i.jsx(c("MWXColumnItem.react"),{align:b,paddingHorizontal:16,paddingTop:j,children:k}),e[3]=b,e[4]=j,e[5]=k,e[6]=a):a=e[6];e[7]===Symbol["for"]("react.memo_cache_sentinel")?(b={className:"x6s0dn4 x78zum5 x1iyjqo2"},e[7]=b):b=e[7];e[8]!==g||e[9]!==h?(j=i.jsx("div",babelHelpers["extends"]({},b,{ref:h,children:g})),e[8]=g,e[9]=h,e[10]=j):j=e[10];e[11]===Symbol["for"]("react.memo_cache_sentinel")?(k={className:"xisnujt"},e[11]=k):k=e[11];e[12]!==f?(b=i.jsx(c("MWXColumnItem.react"),{paddingHorizontal:16,paddingVertical:12,children:i.jsx("div",babelHelpers["extends"]({},k,{children:f}))}),e[12]=f,e[13]=b):b=e[13];e[14]!==b||e[15]!==a||e[16]!==j?(g=i.jsxs(c("CometScrollView.react"),{children:[a,j,b]}),e[14]=b,e[15]=a,e[16]=j,e[17]=g):g=e[17];return g}b=a;e=b;g["default"]=e}),98);
__d("MWEBConnections4AndroidIcon.react",["ix","CometImageFromIXValue.react","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=c("gkx")("23433");function a(a){var b=d("react-compiler-runtime").c(7),e=a.alt,f=a.ref,g=a.size;a=a.xstyle;g=g===void 0?"large":g;var i;b[0]!==g?(i=g==="large"?k?h("398892"):h("398891"):h("398080"),b[0]=g,b[1]=i):i=b[1];g=i;b[2]!==e||b[3]!==f||b[4]!==g||b[5]!==a?(i=j.jsx(c("CometImageFromIXValue.react"),{alt:e,ref:f,source:g,xstyle:a}),b[2]=e,b[3]=f,b[4]=g,b[5]=a,b[6]=i):i=b[6];return i}g["default"]=a}),98);
__d("MWEBPinCodeSetupResult",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["SUCCESS","LABYRINTH_ERROR","VESTA_ERROR","DELETE_MAILBOX_ERROR"]);f.CodeSetupResult=a}),66);
__d("MWXIconRefresh",["MWXSvgIcon","SVGIcon","cr:22458","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22458")),c("gkx")("23219"));g["default"]=a}),98);
__d("MessengerCheckmark.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 36 36",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M26.378 9.169c.597.347.8 1.112.453 1.709l-9 15.5a1.25 1.25 0 0 1-1.965.256l-6.5-6.5a1.25 1.25 0 1 1 1.768-1.768l5.121 5.121a.25.25 0 0 0 .393-.05L24.67 9.621a1.25 1.25 0 0 1 1.709-.453z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MWEncryptedBackupsCreateExtraVirtualDeviceDeferred",["FBLogger","I64","LSEncryptedBackupsCreateVirtualDeviceActionType","LSEncryptedBackupsOpStatus","LSEncryptedBackupsRecoveryCodeStatus","LSIntEnum","ReQL","promiseDone","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("MWEncryptedBackupsCreateExtraVirtualDevice").__setRef("MWEncryptedBackupsCreateExtraVirtualDeviceDeferred");function a(a){var b=a.actionType,e=b===void 0?c("LSEncryptedBackupsCreateVirtualDeviceActionType").INSERT:b,f=a.db,g=a.onFailure,k=a.onSuccess;j.onReady(function(a){c("promiseDone")(a.initializeCreateExtraVirtualDeviceStoredProcedure(f,(h||(h=d("I64"))).of_int32(e)),function(a){a=a[0];if(!(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsOpStatus").SUCCESS)))return g();var b=f.tables.secure_encrypted_backups_recovery_code_status.subscribe(function(){c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(f.tables.secure_encrypted_backups_recovery_code_status)),function(a){if(a==null)return;if(a.length!==1)return;a=a[0].recoveryCodeStatus;if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsRecoveryCodeStatus").VALID))){b();return k()}else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsRecoveryCodeStatus").INVALID))){b();return g()}else return})})},function(){c("FBLogger")("labyrinth_web").mustfix("Error while creating extra virtual device.");return g()})})}g.encryptedBackupsCreateExtraVirtualDeviceDeferred=a}),98);
__d("MWEncryptedBackupsGenerateRecoveryCode",["Base64Utils","I64","LSFactory","LSGenerateRecoveryCodeStoredProcedure"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.db,e=a.virtualDeviceType;return b.runInTransaction(function(a){return c("LSGenerateRecoveryCodeStoredProcedure")(c("LSFactory")(a),{virtualDeviceType:(h||(h=d("I64"))).of_int32(e)})},"readwrite",void 0,void 0,f.id+":31").then(function(a){var b=a[0],c=a[1];a=a[2];return{recoveryCode:b,sprocResult:c,virtualDeviceId:a!=null?d("Base64Utils").fromArrayBuffer(a):void 0}})}g.encryptedBackupsGenerateRecoveryCode=a}),98);
__d("VestaBackupSecretRegister",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("E2EEBackupSecretRegisterModule").__setRef("VestaBackupSecretRegister"),i=c("requireDeferred")("VestaServerGraphQLRegisterProvider").__setRef("VestaBackupSecretRegister");async function a(a){var b=a.isAlreadyRegistered;b=b===void 0?!1:b;var c=a.environment;a=a.input;var d=await Promise.all([i.load(),h.load()]),e=d[0],f=e.beginRegister,g=e.finishRegister;e=e.initRegister;d=d[1];var j=d.registerBackupSecret;d=d.reRegisterBackupSecret;f=[{beginRegister:f,finishRegister:g,initRegister:e},a,{environment:c}];return b?d.apply(void 0,f):j.apply(void 0,f)}g.vestaBackupSecretRegister=a}),98);
__d("useCreateEncryptedBackup",["CometRelay","FBLogger","LSDataTraceCheckPoint","LSDataTraceType","LSIntEnum","MAWCurrentUser","MAWEncryptedBackupsInitializeBackupDeferred","MAWTraceUtils","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWEBODSEntityName.enum","MWEncryptedBackupsCreateExtraVirtualDeviceDeferred","MWEncryptedBackupsGenerateRecoveryCode","MWEncryptedBackupsLocalStorageEntryEnum","QPLUserFlow","VestaBackupSecretRegister","cr:21222","gkx","promiseDone","requireDeferred","useLabyrinthLogging","useMWEBFlowSourceContext","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("MWEncryptedBackupsSharedState").__setRef("useCreateEncryptedBackup"),k=c("requireDeferred")("VestaDeleteAccount").__setRef("useCreateEncryptedBackup");function a(a){var e=a.backupExists,f=a.onInit,g=a.onLabyrinthError,l=a.onSuccess,m=a.onVestaError,n=(i||(i=c("useReStore")))();a=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var o=a.startFlow,p=c("useMWEBFlowSourceContext")(),q=d("CometRelay").useRelayEnvironment(),r=async function(a,b,e){try{d("MAWTraceUtils").recordCheckpointForTrace(b,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_PLUGIN_CALLING_INITIALIZE_BACKUP),[],!1);c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").onboardingAuthQplEvent,"ONBOARDING_INIT_BACKUP_START");await new Promise(function(b,c){return d("MAWEncryptedBackupsInitializeBackupDeferred").initializeBackupDeferred({db:n,instanceKey:e,onBackupCreationSuccess:function(){return b()},onFailure:function(){return c()},qplEventName:a})});c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").onboardingAuthQplEvent,"ONBOARDING_INIT_BACKUP_END");c("QPLUserFlow").addPoint(a,"success_backup_initialization",{instanceKey:e});return!0}catch(f){d("MAWTraceUtils").recordCheckpointForTrace(b,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_PIN_SETUP_FAILURE),[],!1,f==null?void 0:f.message),c("QPLUserFlow").markError(d("MWChatEncryptedBackupsQPLEvents").onboardingAuthQplEvent,"ONBOARDING_INIT_BACKUP_FAILURE"),c("QPLUserFlow").markError(a,"failed_backup_initialization",{instanceKey:e}),c("FBLogger")("labyrinth_web").catching(f).mustfix("[labyrinth][onboarding] Error when initializing backup on device using PIN")}return!1},s=async function(a,b,e){try{d("MAWTraceUtils").recordCheckpointForTrace(b,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_PLUGIN_CALLING_CREATE_EXTRA_VIRTUAL_DEVICE),[],!1);await new Promise(function(a,b){return d("MWEncryptedBackupsCreateExtraVirtualDeviceDeferred").encryptedBackupsCreateExtraVirtualDeviceDeferred({db:n,onFailure:b,onSuccess:a})});c("QPLUserFlow").addPoint(a,"success_device_verification",{instanceKey:e});return!0}catch(f){d("MAWTraceUtils").recordCheckpointForTrace(b,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_PIN_SETUP_FAILURE),[],!1,f==null?void 0:f.message),c("QPLUserFlow").markError(a,"failed_device_verification",{instanceKey:e}),c("FBLogger")("labyrinth_web").catching(f).mustfix("Error when creating extra virtual device with PIN")}return!1};return async function(a,i,t){i===void 0&&(i=d("MWChatEncryptedBackupsQPLEvents").backupSetupQplEvent);f==null||f();var u=d("MAWTraceUtils").startNewTrace((h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").SAP_VESTA_REGISTRATION),d("MAWTraceUtils").CONTEXT_VESTA_REGISTRATION);c("QPLUserFlow").addAnnotations(i,{string:{source:p()}},{instanceKey:t});var v;try{d("MAWTraceUtils").recordCheckpointForTrace(u,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_PLUGIN_CALLING_GENERATE_RECOVERY_CODE),[],!1);o({event:d("MWChatEncryptedBackupsQPLEvents").onboardingAuthQplEvent,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_ONBOARDING_AUTH});c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").onboardingAuthQplEvent,"ONBOARDING_RECOVERY_CODE_GENERATE_START");c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").backupSetupQplEvent,"SETUP_RECOVERY_CODE_GENERATE_START");var w=await d("MWEncryptedBackupsGenerateRecoveryCode").encryptedBackupsGenerateRecoveryCode({db:n,virtualDeviceType:2}),x=w.recoveryCode;w=w.virtualDeviceId;v=w;if(x==null||w==null){c("FBLogger")("labyrinth_web").mustfix("Cannot setup a PIN Code without a recovery code");d("MAWTraceUtils").recordFailureAndFlushForTraceId(u,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_PIN_SETUP_FAILURE),[],"Cannot setup a PIN Code without a recovery code");c("QPLUserFlow").markError(i,"SETUP_RECOVERY_CODE_GENERATE_FAILURE",{instanceKey:t});d("MWChatEncryptedBackupsLogging").endFailure({annotations:{string:{errorReason:"ONBOARDING_RECOVERY_CODE_GENERATE_FAILURE"}},errorName:"ONBOARDING_RECOVERY_CODE_GENERATE_FAILURE",event:d("MWChatEncryptedBackupsQPLEvents").onboardingAuthQplEvent,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_ONBOARDING_AUTH});g==null||g();return}d("MAWTraceUtils").recordCheckpointForTrace(u,h.ofNumber(c("LSDataTraceCheckPoint").SAP_VESTA_CALLING_VESTA_REGISTRATION),[],!1);var y=new TextEncoder();c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").onboardingAuthQplEvent,"ONBOARDING_SAP_VESTA_REGISTRATION_START");c("QPLUserFlow").addPoint(i,"SETUP_SAP_VESTA_REGISTRATION_START",{instanceKey:t});await d("VestaBackupSecretRegister").vestaBackupSecretRegister({environment:q,input:{clientId:w,productUseCase:c("gkx")("24066")?"IGD_ENC_BACKUP":"MSGR_ENC_BACKUP",secret:y.encode(x),vestaAccountPin:a}});c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").onboardingAuthQplEvent,"ONBOARDING_SAP_VESTA_REGISTRATION_END");c("QPLUserFlow").addPoint(i,"SETUP_SAP_VESTA_REGISTRATION_END",{instanceKey:t});d("MAWTraceUtils").recordCheckpointForTrace(u,h.ofNumber(c("LSDataTraceCheckPoint").SAP_VESTA_REGISTRATION_COMPLETION),[],!1);y=e?await s(i,u,t):await r(i,u,t);if(y)d("MAWTraceUtils").recordSuccessAndFlushForTraceId(u,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_PIN_SETUP_SUCCESS),[]),j.onReady(function(a){a=a.upsertEBSharedStateEntry;c("promiseDone")(a({db:n,stateKey:c("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_ONBOARDED_SUCCESSFULLY}))}),l&&l(),d("MWChatEncryptedBackupsLogging").endSuccess({event:d("MWChatEncryptedBackupsQPLEvents").onboardingAuthQplEvent,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_ONBOARDING_AUTH}),d("MWChatEncryptedBackupsLogging").endSuccess({annotations:{string:{setup_type:"pin_code"}},event:i,instanceKey:t}),b("cr:21222")==null||b("cr:21222").fireAndForget("backend","addDeviceWithPinInWorker",{recoveryCode:x,userId:d("MAWCurrentUser").getID()});else{c("QPLUserFlow").markError(i,"pin_code_create_vd_error",{instanceKey:t});d("MAWTraceUtils").recordCheckpointForTrace(u,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_PIN_SETUP_FAILURE),[],!1,"Virtual device creation failure");c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").onboardingAuthQplEvent,"ONBOARDING_DELETE_VESTA_ACCOUNT_START");a=await k.load();y=a.vestaDeleteAccount;y({clientId:w,environment:q,productUseCase:"MSGR_ENC_BACKUP",updater:function(a){var b;b=(b=a.getRootField("fbid_based_auth_layer_vesta_delete_account"))==null?void 0:b.getLinkedRecord("vesta_user_info");if(b!=null){(a=a.getRoot())==null||(a=a.getLinkedRecord("viewer"))==null||(a=a.getLinkedRecord("messenger_default_encrypted_backup"))==null||(a=a.getLinkedRecord("vesta_user_info"))==null||a.copyFieldsFrom(b)}}});c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").onboardingAuthQplEvent,"ONBOARDING_DELETE_VESTA_ACCOUNT_END");d("MWChatEncryptedBackupsLogging").endFailure({annotations:{string:{errorReason:"ONBOARDING_VIRTUAL_DEVICE_CREATE_FAILURE"}},errorName:"ONBOARDING_RECOVERY_CODE_GENERATE_FAILURE",event:d("MWChatEncryptedBackupsQPLEvents").onboardingAuthQplEvent,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_ONBOARDING_AUTH});d("MAWTraceUtils").recordCheckpointForTrace(u,h.ofNumber(c("LSDataTraceCheckPoint").FLOW_END_FOR_FAILURE),[],!0);g==null||g()}}catch(b){if(v!=null){x=await k.load();a=x.vestaDeleteAccount;a({clientId:v,environment:q,productUseCase:"MSGR_ENC_BACKUP",updater:function(a){var b;b=(b=a.getRootField("fbid_based_auth_layer_vesta_delete_account"))==null?void 0:b.getLinkedRecord("vesta_user_info");if(b!=null){(a=a.getRoot())==null||(a=a.getLinkedRecord("viewer"))==null||(a=a.getLinkedRecord("messenger_default_encrypted_backup"))==null||(a=a.getLinkedRecord("vesta_user_info"))==null||a.copyFieldsFrom(b)}}})}c("QPLUserFlow").markError(i,"pin_code_vesta_error",{instanceKey:t});d("MWChatEncryptedBackupsLogging").endFailure({annotations:{string:{errorReason:b.toString()}},errorName:"ONBOARDING_UNKNOWN_FAILURE",event:d("MWChatEncryptedBackupsQPLEvents").onboardingAuthQplEvent,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_ONBOARDING_AUTH});d("MAWTraceUtils").recordFailureAndFlushForTraceId(u,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_PIN_SETUP_FAILURE),[],b.toString());m==null||m();c("FBLogger")("labyrinth_web").catching(b).mustfix("[labyrinth][onboarding] Error when setting the pin code up")}}}g.default=a}),98);
__d("useMWChatEncryptedBackupsOnPinCodeSetup",["fbt","BaseToasterStateManager","FDSCheckmarkCircleFilled24Icon","FDSIcon.react","MWChatEncryptedBackupsQPLEvents","MWEBPinCodeSetupResult","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum","MWXIconRefresh","MWXIconStrict.react","MessengerCheckmark.svg.react","QPLUserFlow","SVGIcon","mwPushToast","react","react-compiler-runtime","useCreateEncryptedBackup"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useRef,l=c("BaseToasterStateManager").getInstance();function a(a){var b=d("react-compiler-runtime").c(14),e=a.backupExists,f=a.onFinish,g=a.onStart,h=k(null);b[0]!==g?(a=function(){h.current=m(h),g()},b[0]=g,b[1]=a):a=b[1];var i,j,l;b[2]!==f?(i=function(){f==null||f(d("MWEBPinCodeSetupResult").CodeSetupResult.LABYRINTH_ERROR),h.current=o(h)},j=function(){f==null||f(d("MWEBPinCodeSetupResult").CodeSetupResult.SUCCESS),d("MWEBUseLocalStorage").mwEBCreateLocalStorageEntry(c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_SET_UP_IN_CURRENT_SESSION),h.current=n(h)},l=function(){f==null||f(d("MWEBPinCodeSetupResult").CodeSetupResult.VESTA_ERROR),h.current=o(h)},b[2]=f,b[3]=i,b[4]=j,b[5]=l):(i=b[3],j=b[4],l=b[5]);var p;b[6]!==e||b[7]!==a||b[8]!==i||b[9]!==j||b[10]!==l?(p={backupExists:e,onInit:a,onLabyrinthError:i,onSuccess:j,onVestaError:l},b[6]=e,b[7]=a,b[8]=i,b[9]=j,b[10]=l,b[11]=p):p=b[11];e=c("useCreateEncryptedBackup")(p);b[12]!==e?(a={onPinCodeSetup:e,showErrorToast:function(){h.current=o(h)},showInProgressToast:function(){h.current=m(h)}},b[12]=e,b[13]=a):a=b[13];return a}function m(a){if(a.current!=null)return a.current;a=60*60*24*1e3;c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").backupSetupQplEvent,"pin_code_creation_begin_toast");return d("mwPushToast").mwPushToast({icon:{comet:j.jsx(c("MWXIconStrict.react"),{icon:c("MWXIconRefresh"),size:20}),mds:c("MWXIconRefresh").originalComponent},title:h._(/*BTDS*/"Creating your PIN\u2026")},a)}function n(a){p(a);c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").backupSetupQplEvent,"pin_code_creation_success_toast");return d("mwPushToast").mwPushToast({icon:{comet:j.jsx(c("FDSIcon.react"),{icon:c("FDSCheckmarkCircleFilled24Icon")}),mds:d("SVGIcon").svgIcon(c("MessengerCheckmark.svg.react"))},testid:"mw-encrypted-backups-pin-code-created-toast",title:h._(/*BTDS*/"PIN created")})}function o(a){p(a);c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").backupSetupQplEvent,"pin_code_creation_failed_toast");return d("mwPushToast").mwPushErrorToast({body:h._(/*BTDS*/"Failed to create PIN. Try again.")})}function p(a){if(a.current==null)return;l.expire(a.current);a.current=null}g["default"]=a}),226);
__d("MWEBOnboardingConfirmPINJewelStep.react",["fbt","MWChatEncryptedBackupsPinCodeConfirmStepContentWrapper.react","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsUpsellJewelChatTabLayout.react","MWEBConnections4AndroidIcon.react","MWEBPinCodeSize","MWXCircleButton.react","MWXColumn.react","MWXColumnItem.react","MWXIconArrowLeft","MWXText.react","promiseDone","react","react-compiler-runtime","useEncryptedBackupsQplImpressionRef","useMWChatEncryptedBackupsNumericCode","useMWChatEncryptedBackupsOnPinCodeSetup","xplatToDOMRef"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k="eb-onboarding-confirm-pin-dialog-step";function a(a){var b=d("react-compiler-runtime").c(63),e=a.enteredPinCode,f=a.isChatTab,g=a.onComplete,i=a.onReturn,l=a.setIsMismatchError,m=a.subtitle;a=a.title;var n=c("useEncryptedBackupsQplImpressionRef")(d("MWChatEncryptedBackupsQPLEvents").backupSetupQplEvent,"ONBOARDING_EB_PIN_CONFIRM_STEP_IMPRESSION"),o;b[0]!==g?(o={backupExists:!1,onStart:g},b[0]=g,b[1]=o):o=b[1];g=c("useMWChatEncryptedBackupsOnPinCodeSetup")(o);var p=g.onPinCodeSetup;b[2]!==i||b[3]!==l?(o=function(){l(!0),i()},b[2]=i,b[3]=l,b[4]=o):o=b[4];b[5]!==e||b[6]!==o?(g={onCodeMismatch:o,previouslyInsertedCode:e},b[5]=e,b[6]=o,b[7]=g):g=b[7];b[8]!==p?(e=function(a){c("promiseDone")(p(a,d("MWChatEncryptedBackupsQPLEvents").backupSetupQplEvent))},b[8]=p,b[9]=e):e=b[9];b[10]!==g||b[11]!==e?(o={checkPreviouslyInsertedCode:g,focusRegionId:k,inputSize:d("MWEBPinCodeSize").EB_PIN_CODE_SIZE,onComplete:e,type:"pin"},b[10]=g,b[11]=e,b[12]=o):o=b[12];g=d("useMWChatEncryptedBackupsNumericCode").useMWChatEncryptedBackupsNumericCode(o);e=g[0];o=g[1];g=o.invalidKeyPressedError;o=f?"small":"large";var q;b[13]===Symbol["for"]("react.memo_cache_sentinel")?(q=h._(/*BTDS*/"Back"),b[13]=q):q=b[13];b[14]!==i?(q={align:"start",item:j.jsx(c("MWXCircleButton.react"),{color:"primary",icon:c("MWXIconArrowLeft"),label:q,onPress:i,size:32})},b[14]=i,b[15]=q):q=b[15];var r;b[16]!==n?(r=d("xplatToDOMRef").xplatToDOMRef(n),b[16]=n,b[17]=r):r=b[17];n=f?"small":"large";var s;b[18]!==n?(s=j.jsx(c("MWXColumnItem.react"),{children:j.jsx(c("MWEBConnections4AndroidIcon.react"),{size:n})}),b[18]=n,b[19]=s):s=b[19];n=f?0:20;var t=f?0:20,u;b[20]===Symbol["for"]("react.memo_cache_sentinel")?(u={className:"x78zum5 x141feeh"},b[20]=u):u=b[20];var v=f?0:20,w=f?0:8,x;b[21]===Symbol["for"]("react.memo_cache_sentinel")?(x={className:"xpvyfi4 x3ajldb"},b[21]=x):x=b[21];b[22]!==a?(x=j.jsx("div",babelHelpers["extends"]({},x,{children:j.jsx(c("MWXText.react"),{align:"center",type:"headlineEmphasized2",children:a})})),b[22]=a,b[23]=x):x=b[23];b[24]!==v||b[25]!==w||b[26]!==x?(a=j.jsx("div",babelHelpers["extends"]({},u,{children:j.jsx(c("MWXColumnItem.react"),{paddingHorizontal:v,paddingTop:w,verticalAlign:"bottom",children:x})})),b[24]=v,b[25]=w,b[26]=x,b[27]=a):a=b[27];b[28]!==n||b[29]!==t||b[30]!==a?(u=j.jsx(c("MWXColumnItem.react"),{paddingHorizontal:n,paddingTop:t,children:a}),b[28]=n,b[29]=t,b[30]=a,b[31]=u):u=b[31];v=f?0:16;w=f?0:12;b[32]!==m?(x=j.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body3",children:m}),b[32]=m,b[33]=x):x=b[33];b[34]!==w||b[35]!==x?(n=j.jsx(c("MWXColumnItem.react"),{paddingVertical:w,children:x}),b[34]=w,b[35]=x,b[36]=n):n=b[36];b[37]!==v||b[38]!==n?(t=j.jsx(c("MWXColumnItem.react"),{align:"center",paddingHorizontal:v,paddingTop:20,children:n}),b[37]=v,b[38]=n,b[39]=t):t=b[39];a=f?12:20;m=f?0:8;w=f?"tiny":"small";b[40]!==e||b[41]!==g||b[42]!==w?(x=j.jsx(c("MWChatEncryptedBackupsPinCodeConfirmStepContentWrapper.react"),babelHelpers["extends"]({error:g,isMessenger:!1},e,{inputSize:w})),b[40]=e,b[41]=g,b[42]=w,b[43]=x):x=b[43];b[44]!==m||b[45]!==x?(v=j.jsx(c("MWXColumnItem.react"),{align:"center",paddingTop:m,children:x}),b[44]=m,b[45]=x,b[46]=v):v=b[46];b[47]!==a||b[48]!==v?(n=j.jsx(c("MWXColumnItem.react"),{paddingTop:a,children:v}),b[47]=a,b[48]=v,b[49]=n):n=b[49];b[50]!==f?(e=f?null:j.jsx(c("MWXColumn.react"),{paddingVertical:20,children:j.jsx(c("MWXColumnItem.react"),{paddingTop:12,children:j.jsx("div",{className:"xx9tyur"})})}),b[50]=f,b[51]=e):e=b[51];b[52]!==r||b[53]!==s||b[54]!==u||b[55]!==t||b[56]!==n||b[57]!==e?(g=j.jsxs(c("MWXColumn.react"),{align:"center",paddingHorizontal:16,ref:r,children:[s,u,t,n,e]}),b[52]=r,b[53]=s,b[54]=u,b[55]=t,b[56]=n,b[57]=e,b[58]=g):g=b[58];b[59]!==g||b[60]!==o||b[61]!==q?(w=j.jsx(c("MWChatEncryptedBackupsUpsellJewelChatTabLayout.react"),{size:o,topItem:q,children:g}),b[59]=g,b[60]=o,b[61]=q,b[62]=w):w=b[62];return w}g["default"]=a}),226);
__d("MWEncryptedBackupsCreateExtraVirtualDevice",["LSCreateExtraVirtualDeviceStoredProcedure","LSFactory"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return a.runInTransaction(function(a){return c("LSCreateExtraVirtualDeviceStoredProcedure")(c("LSFactory")(a),{actionType:b})},"readwrite",void 0,void 0,f.id+":24")}g.initializeCreateExtraVirtualDeviceStoredProcedure=a}),98);
__d("MWEncryptedBackupsOnboardingType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["WEB_ONLY_ONBOARDING","NEW_USER_ONBOARDING"]);c=a;f["default"]=c}),66);
__d("MWFDSKey.svg.react",["cr:21689"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:21689")}),98);
__d("MWFDSRefresh.svg.react",["cr:21756"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:21756")}),98);
__d("VestaDeleteAccountMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="23902987852620802"}),null);
__d("VestaDeleteAccountMutation.graphql",["VestaDeleteAccountMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{kind:"Variable",name:"delete_account_request",variableName:"input"}],d={alias:null,args:null,kind:"ScalarField",name:"client_generated_id",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"VestaDeleteAccountMutation",selections:[{alias:null,args:c,concreteType:"VestaDeleteAccountResponse",kind:"LinkedField",name:"fbid_based_auth_layer_vesta_delete_account",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEBVirtualDevice",kind:"LinkedField",name:"hsm_virtual_device",plural:!1,selections:[d],storageKey:null},{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useMWChatEncryptedBackupsVestaUserInfo_vestaGetUserInfoResponse"}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"VestaDeleteAccountMutation",selections:[{alias:null,args:c,concreteType:"VestaDeleteAccountResponse",kind:"LinkedField",name:"fbid_based_auth_layer_vesta_delete_account",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEBVirtualDevice",kind:"LinkedField",name:"hsm_virtual_device",plural:!1,selections:[d,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_registered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login_timeout_remaining_secs",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("VestaDeleteAccountMutation_facebookRelayOperation"),metadata:{},name:"VestaDeleteAccountMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("VestaDeleteAccount",["CometRelay","VestaDeleteAccountMutation.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var c=a.clientId,e=a.environment,f=a.optimisticUpdater,g=a.productUseCase;a=a.updater;var i=h!==void 0?h:h=b("VestaDeleteAccountMutation.graphql");return d("CometRelay").commitMutation(e,{mutation:i,optimisticUpdater:f,updater:a,variables:{input:{fbid:c,product_use_case:g,vesta_client_api_version:6}}})}g.vestaDeleteAccount=a}),98);
__d("VestaServerGraphQLRegisterProviderBeginRegisterMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9596958053703216"}),null);
__d("VestaServerGraphQLRegisterProviderBeginRegisterMutation.graphql",["VestaServerGraphQLRegisterProviderBeginRegisterMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"begin_register_request",variableName:"input"}],concreteType:"VestaBeginRegisterResponse",kind:"LinkedField",name:"fbid_based_auth_layer_vesta_begin_register",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_opaque_r2",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_opaque_challenge",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_opaque_r2_sig",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"VestaServerGraphQLRegisterProviderBeginRegisterMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"VestaServerGraphQLRegisterProviderBeginRegisterMutation",selections:c},params:{id:b("VestaServerGraphQLRegisterProviderBeginRegisterMutation_facebookRelayOperation"),metadata:{},name:"VestaServerGraphQLRegisterProviderBeginRegisterMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("VestaServerGraphQLRegisterProviderFinishRegisterMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9551173398333326"}),null);
__d("VestaServerGraphQLRegisterProviderFinishRegisterMutation.graphql",["VestaServerGraphQLRegisterProviderFinishRegisterMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{kind:"Variable",name:"finish_register_request",variableName:"input"}],d={alias:null,args:null,kind:"ScalarField",name:"register_success",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"client_generated_id",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"VestaServerGraphQLRegisterProviderFinishRegisterMutation",selections:[{alias:null,args:c,concreteType:"VestaFinishRegisterResponse",kind:"LinkedField",name:"fbid_based_auth_layer_vesta_finish_register",plural:!1,selections:[d,{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEBVirtualDevice",kind:"LinkedField",name:"hsm_virtual_device",plural:!1,selections:[e],storageKey:null},{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useMWChatEncryptedBackupsVestaUserInfo_vestaGetUserInfoResponse"}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"VestaServerGraphQLRegisterProviderFinishRegisterMutation",selections:[{alias:null,args:c,concreteType:"VestaFinishRegisterResponse",kind:"LinkedField",name:"fbid_based_auth_layer_vesta_finish_register",plural:!1,selections:[d,{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEBVirtualDevice",kind:"LinkedField",name:"hsm_virtual_device",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_registered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login_timeout_remaining_secs",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("VestaServerGraphQLRegisterProviderFinishRegisterMutation_facebookRelayOperation"),metadata:{},name:"VestaServerGraphQLRegisterProviderFinishRegisterMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("VestaServerGraphQLRegisterProviderInitQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="10088892487810238"}),null);
__d("VestaServerGraphQLRegisterProviderInitQuery.graphql",["VestaServerGraphQLRegisterProviderInitQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"request"}],c=[{alias:null,args:[{kind:"Variable",name:"vesta_init_request",variableName:"request"}],concreteType:"VestaInitIqResponse",kind:"LinkedField",name:"fbid_based_auth_layer_vesta_register_init",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_island_rsa_pub",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_island_rsa_pub_signature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_opaque_pub",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_opaque_pub_signature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_island_ed25519_pub",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_island_ed25519_pub_signature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_registered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"VestaServerGraphQLRegisterProviderInitQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"VestaServerGraphQLRegisterProviderInitQuery",selections:c},params:{id:b("VestaServerGraphQLRegisterProviderInitQuery_facebookRelayOperation"),metadata:{},name:"VestaServerGraphQLRegisterProviderInitQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("VestaServerGraphQLRegisterProvider",["E2EEBackupUtil","RelayHooks","RelayModern","VestaServerGraphQLRegisterProviderBeginRegisterMutation.graphql","VestaServerGraphQLRegisterProviderFinishRegisterMutation.graphql","VestaServerGraphQLRegisterProviderInitQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;async function a(a,c){c=c.environment;c=await d("RelayHooks").fetchQuery(c,h!==void 0?h:h=b("VestaServerGraphQLRegisterProviderInitQuery.graphql"),{request:{fbid:a.clientId,product_use_case:a.productUseCase,vesta_client_api_version:6}}).toPromise();a=c==null?void 0:c.fbid_based_auth_layer_vesta_register_init;c=a==null?void 0:a.base64url_encoded_island_rsa_pub;var e=a==null?void 0:a.base64url_encoded_island_rsa_pub_signature,f=a==null?void 0:a.base64url_encoded_opaque_pub,g=a==null?void 0:a.base64url_encoded_opaque_pub_signature,i=a==null?void 0:a.base64url_encoded_island_ed25519_pub,j=a==null?void 0:a.base64url_encoded_island_ed25519_pub_signature,k=a==null?void 0:a.is_registered;a=a==null?void 0:a.attempts_remaining;if(c!=null&&e!=null&&f!=null&&g!=null&&i!=null&&j!=null&&k!=null){var l;return{islandRsaPub:(l=d("E2EEBackupUtil")).decodeBase64Url(c),islandRsaPubSig:l.decodeBase64Url(e),opaquePub:l.decodeBase64Url(f),opaquePubSig:l.decodeBase64Url(g),islandEd25519Pub:l.decodeBase64Url(i),islandEd25519PubSig:l.decodeBase64Url(j),isRegistered:k,loginAttemptsRemaining:a}}throw new Error("GraphQL Response is Null")}function c(a,c){var e=c.environment,f=i!==void 0?i:i=b("VestaServerGraphQLRegisterProviderBeginRegisterMutation.graphql"),g={input:{base64url_encoded_opaque_r1:d("E2EEBackupUtil").encodeBase64Url(a.opaqueR1),fbid:a.clientId,product_use_case:a.productUseCase,vesta_client_api_version:6}};return new Promise(function(a,b){d("RelayModern").commitMutation(e,{mutation:f,variables:g,onCompleted:function(c){c=c.fbid_based_auth_layer_vesta_begin_register;var e=c==null?void 0:c.base64url_encoded_opaque_r2,f=c==null?void 0:c.base64url_encoded_opaque_challenge;c=c==null?void 0:c.base64url_encoded_opaque_r2_sig;if(e!=null&&f!=null&&c!=null){a({opaqueR2:d("E2EEBackupUtil").decodeBase64Url(e),opaqueChallenge:d("E2EEBackupUtil").decodeBase64Url(f),opaqueR2Sig:d("E2EEBackupUtil").decodeBase64Url(c)});return}b(new Error("GraphQL Response is Null"))},onError:function(a){b(a)}})})}function e(a,c){var e=c.environment,f=c.updater;return new Promise(function(c,g){d("RelayModern").commitMutation(e,{mutation:j!==void 0?j:j=b("VestaServerGraphQLRegisterProviderFinishRegisterMutation.graphql"),variables:{input:{base64url_encoded_enc_reg_payload:d("E2EEBackupUtil").encodeBase64Url(a.encRegPayload),fbid:a.clientId,product_use_case:a.productUseCase,vesta_client_api_version:6}},onCompleted:function(a){a=(a=a.fbid_based_auth_layer_vesta_finish_register)==null?void 0:a.register_success;if(a!=null){c({registerSuccess:a});return}g(new Error("GraphQL Response is Null"))},onError:function(a){g(a)},updater:f})})}g.initRegister=a;g.beginRegister=c;g.finishRegister=e}),98);